# SimpleTorrent 要件定義書

## 1. プロジェクト概要

### 1.1 目的
BitThiefのようなシンプルで使いやすいクロスプラットフォーム対応のトレントクライアントを開発する。

### 1.2 対象ユーザー
- トレント技術を合法的に使用したい一般ユーザー
- Linux ISOやオープンソースソフトウェアをダウンロードしたいユーザー
- 複雑な設定を必要としないシンプルなツールを求めるユーザー

### 1.3 対象プラットフォーム
- Windows (Windows 7以降)
- macOS (10.14以降)
- Linux (主要ディストリビューション)

## 2. 機能要件

### 2.1 必須機能（MVP）

#### 2.1.1 トレント管理
- [ ] torrentファイルの追加（ドラッグ&ドロップ対応）
- [ ] マグネットリンクの追加（クリップボードから自動検出）
- [ ] トレントの削除（データの削除オプション付き）
- [ ] 複数トレントの同時ダウンロード（最大5個）

#### 2.1.2 ダウンロード制御
- [ ] ダウンロードの開始/一時停止/停止
- [ ] ダウンロード進捗の表示（パーセンテージ、速度、残り時間）
- [ ] ファイル選択機能（トレント内の特定ファイルのみダウンロード）
- [ ] ダウンロード優先順位の設定

#### 2.1.3 基本設定
- [ ] ダウンロードディレクトリの指定
- [ ] 帯域幅制限（アップロード/ダウンロード）
- [ ] ポート設定（自動/手動）
- [ ] 起動時の自動実行設定

### 2.2 セキュリティ機能

#### 2.2.1 必須セキュリティ
- [ ] VPNインターフェースバインディング
- [ ] 基本的なIPフィルタリング
- [ ] 安全な入力検証（バッファオーバーフロー対策）

#### 2.2.2 プライバシー保護
- [ ] DHT無効化オプション
- [ ] PEX無効化オプション
- [ ] ローカルピア発見（LSD）無効化オプション

### 2.3 ユーザーインターフェース

#### 2.3.1 Web UI
- [ ] レスポンシブデザイン（デスクトップ/タブレット対応）
- [ ] ダークモード対応
- [ ] 多言語対応（日本語、英語）
- [ ] リアルタイム更新（WebSocket使用）

#### 2.3.2 UI要素
- [ ] トレントリスト（名前、サイズ、進捗、速度、ステータス）
- [ ] 詳細パネル（ピア情報、トラッカー情報、ファイルリスト）
- [ ] グローバル統計（総ダウンロード/アップロード量）
- [ ] 通知システム（完了通知、エラー通知）

## 3. 非機能要件

### 3.1 パフォーマンス
- 起動時間：3秒以内
- メモリ使用量：100MB以下（アイドル時）
- CPU使用率：5%以下（アイドル時）
- 同時接続ピア数：200以上
- 最大同時トレント数：100

### 3.2 信頼性
- 異常終了時の自動復旧
- ダウンロード状態の永続化
- 破損データの自動検証と再ダウンロード

### 3.3 使いやすさ
- インストール不要（単一実行ファイル）
- 設定なしで即使用可能（デフォルト設定で動作）
- 直感的なUI（学習時間5分以内）

### 3.4 セキュリティ
- 定期的なセキュリティアップデート
- 既知の脆弱性への対応
- セキュアコーディング標準の遵守

### 3.5 配布要件
- バイナリサイズ：20MB以下
- 依存関係：なし（スタンドアロン実行）
- 自動更新機能（オプション）

## 4. 技術仕様

### 4.1 開発言語・フレームワーク
- **言語**: Go 1.21以上
- **トレントライブラリ**: anacrolix/torrent
- **Web フレームワーク**: 標準ライブラリ（net/http）
- **フロントエンド**: Vanilla JavaScript + CSS

### 4.2 プロトコルサポート
- BitTorrent v1（必須）
- BitTorrent v2（将来対応）
- WebSeed（HTTP/HTTPS）
- DHT（Mainline DHT）
- PEX（Peer Exchange）
- uTP（μTP）

### 4.3 ファイル形式
- .torrent ファイル
- マグネットリンク（magnet:）
- 設定ファイル：JSON形式

## 5. 制約事項

### 5.1 技術的制約
- プロトコル暗号化（MSE/PE）は初期バージョンでは非対応
- IPv6は将来バージョンで対応
- プロキシサポートは将来バージョンで対応

### 5.2 法的制約
- 著作権侵害を促進する機能は実装しない
- 起動時に免責事項を表示
- 合法的な使用例を明示

### 5.3 リソース制約
- 開発期間：3ヶ月
- 開発人員：1名
- テスト環境：各OS最低1環境

## 6. 成功基準

### 6.1 機能面
- すべての必須機能が正常に動作すること
- 主要なトレントサイトのtorrentファイルが問題なく処理できること
- 5つ以上のトレントを同時にダウンロードできること

### 6.2 品質面
- クラッシュ率：0.1%以下
- メモリリーク：なし
- セキュリティ脆弱性：重大な脆弱性なし

### 6.3 ユーザビリティ
- 初回起動から最初のダウンロード開始まで：3クリック以内
- エラーメッセージ：ユーザーが理解できる内容
- レスポンス時間：すべての操作で1秒以内

## 7. 将来の拡張計画

### 7.1 フェーズ2（6ヶ月後）
- プロトコル暗号化（MSE/PE）
- RSS自動ダウンロード
- スケジューリング機能
- プラグインシステム

### 7.2 フェーズ3（1年後）
- モバイルアプリ（iOS/Android）
- リモート管理機能
- ストリーミング再生
- BitTorrent v2完全対応

## 8. リスクと対策

### 8.1 技術的リスク
- **リスク**: トレントライブラリのバグ
- **対策**: 定期的なライブラリ更新、代替ライブラリの調査

### 8.2 法的リスク
- **リスク**: 著作権侵害での使用
- **対策**: 明確な免責事項、合法的使用の推奨

### 8.3 セキュリティリスク
- **リスク**: 悪意のあるトレントファイル
- **対策**: 入力検証の徹底、サンドボックス環境でのテスト

## 9. テスト要件

### 9.1 単体テスト
- カバレッジ：80%以上
- 重要機能：100%カバー

### 9.2 統合テスト
- 実際のトレントファイルでのテスト
- 各プラットフォームでの動作確認
- ストレステスト（100トレント同時処理）

### 9.3 受け入れテスト
- ユーザビリティテスト（5名以上）
- パフォーマンステスト
- セキュリティ監査

## 10. ドキュメント要件

### 10.1 ユーザー向け
- クイックスタートガイド
- FAQ
- トラブルシューティング

### 10.2 開発者向け
- API仕様書
- アーキテクチャ設計書
- ビルド手順書

---

作成日: 2025-01-31
バージョン: 1.0