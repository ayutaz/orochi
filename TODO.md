# Orochi TODO List

## 完了したタスク ✅

### フェーズ1: 基本構造
- [x] プロジェクトの初期設定
- [x] CI/CDパイプライン構築（GitHub Actions）
- [x] TDDによる基本アーキテクチャ実装
- [x] Webサーバー実装
- [x] トレントファイルパーサー実装
- [x] トレントマネージャー実装
- [x] REST API実装
- [x] 基本的なWeb UI実装

### フェーズ2: コード品質改善
- [x] エラーハンドリングの統一化
- [x] ロギングシステムの導入
- [x] HTTPルーターの改善
- [x] ミドルウェアの実装
- [x] 並行処理の最適化
- [x] 設定管理の改善
- [x] 統合テストの追加
- [x] メトリクスの追加
- [x] パフォーマンステスト

### フェーズ3: モダンUI実装
- [x] React + TypeScript + Material-UI導入
- [x] 国際化対応（日本語/英語）
- [x] ダークモード対応
- [x] WebSocket実装（リアルタイム更新）
- [x] ドラッグ&ドロップによる複数ファイルアップロード
- [x] トレント一覧画面（プログレスバー、速度表示）
- [x] トレント詳細画面（ファイル、ピア、トラッカー）
- [x] ファイル選択機能
- [x] 設定画面

### フェーズ4: ライブラリ統合
- [x] anacrolix/torrentライブラリの統合
- [x] クライアントアダプターの実装
- [x] インターフェースの互換性確保

## 残っているタスク 📝

### 優先度: 高 🔴

#### コア機能の実装
- [ ] 実際のトレントダウンロード機能の実装
  - [ ] トレントクライアントの開始/停止処理
  - [ ] ダウンロードディレクトリへのファイル保存
  - [ ] 帯域幅制限の実装
  
- [ ] ピア接続とデータ転送の実装
  - [ ] ピア探索とハンドシェイク
  - [ ] ピース要求と受信
  - [ ] チョーキングアルゴリズム
  
- [ ] ピース管理とハッシュ検証の実装
  - [ ] ピースの優先順位設定
  - [ ] ハッシュ検証処理
  - [ ] 破損ピースの再ダウンロード
  
- [ ] ダウンロード進捗のリアルタイム更新実装
  - [ ] 実際の進捗情報の取得
  - [ ] WebSocket経由での更新送信
  - [ ] UI側での表示更新
  
- [ ] アップロード（シード）機能の実装
  - [ ] 完了したトレントのシード
  - [ ] アップロード帯域幅制限
  - [ ] シード比率の管理

#### データ永続化
- [ ] トレント状態の永続化実装
  - [ ] SQLiteデータベースの導入
  - [ ] トレントメタデータの保存
  - [ ] ダウンロード進捗の保存
  - [ ] セッション復元機能

#### セキュリティ
- [ ] WebSocket CORSセキュリティ制限の実装
  - [ ] 本番環境用のオリジン制限
  - [ ] 認証トークンの実装

### 優先度: 中 🟡

- [ ] 設定ファイルの保存/読み込み実装
  - [ ] JSON/YAML形式での設定管理
  - [ ] 設定のホットリロード
  
- [ ] VPNバインディング機能の実装
  - [ ] ネットワークインターフェース選択
  - [ ] VPN切断時の自動停止
  
- [ ] 基本的な認証機能の実装
  - [ ] ユーザー認証
  - [ ] APIキー認証
  - [ ] セッション管理
  
- [ ] ファイルアップロードのサイズ制限実装
  - [ ] 設定可能な最大ファイルサイズ
  - [ ] アップロード進捗の検証
  
- [ ] WebSocket機能のテスト追加
  - [ ] 接続/切断テスト
  - [ ] メッセージ送受信テスト

### 優先度: 低 🟢

- [ ] main関数とshowDisclaimer関数のテスト追加
- [ ] APIドキュメント（OpenAPI/Swagger）の作成
- [ ] ユーザーマニュアルの詳細化
- [ ] Dockerイメージの作成
- [ ] Helm chartの作成

## 実装順序の推奨

### Phase 1: コアトレント機能（1-2週間）
1. 実際のトレントダウンロード機能の実装
2. ピア接続とデータ転送の実装
3. ピース管理とハッシュ検証の実装
4. ダウンロード進捗のリアルタイム更新実装

### Phase 2: データ管理とシード機能（1週間）
1. トレント状態の永続化実装
2. アップロード（シード）機能の実装
3. 設定ファイルの保存/読み込み実装

### Phase 3: セキュリティと品質（1週間）
1. WebSocket CORSセキュリティ制限の実装
2. 基本的な認証機能の実装
3. ファイルアップロードのサイズ制限実装
4. 各種テストの追加

### Phase 4: 高度な機能（オプション）
1. VPNバインディング機能の実装
2. プロトコル暗号化（MSE/PE）
3. SOCKS5プロキシサポート
4. RSS/Atomフィード対応

## 注意事項

- TDD原則を維持し、新機能実装前にテストを書く
- 各フェーズ完了後にCIが全てパスすることを確認
- パフォーマンステストで性能劣化がないことを確認
- セキュリティを考慮した実装を心がける