# Orochi - 残タスクと今後の開発計画

## 現在の実装状況

### ✅ 完了済み機能
- [x] プロジェクト構造とGit/GitHub設定
- [x] CI/CD (GitHub Actions)
- [x] 要件定義と設計ドキュメント
- [x] 設定管理モジュール
- [x] Webサーバー実装
- [x] トレントファイル/マグネットリンクパーサー
- [x] トレントマネージャー（メモリ内管理）
- [x] REST API
- [x] Web UI（基本的なインターフェース）
- [x] 免責事項表示
- [x] TDDによる品質保証

## 🚧 未実装の主要機能

### 1. **実際のトレントダウンロード機能** 🔴 最優先
- [ ] anacrolix/torrentライブラリの統合
- [ ] ピア接続とデータ転送
- [ ] ピース管理とハッシュ検証
- [ ] ダウンロード進捗の実時間更新
- [ ] アップロード（シード）機能

### 2. **セキュリティ機能**
- [ ] VPNインターフェースバインディング
- [ ] IPフィルタリング実装
- [ ] プロトコル暗号化（MSE/PE）
- [ ] SOCKS5プロキシサポート

### 3. **パフォーマンス最適化**
- [ ] 並行ダウンロード制御
- [ ] メモリ使用量の最適化
- [ ] ディスクI/O最適化
- [ ] 接続プール管理

### 4. **永続化とデータ管理**
- [ ] トレント状態の永続化（データベース/ファイル）
- [ ] ダウンロード履歴
- [ ] 設定ファイルの保存/読み込み
- [ ] セッション復元機能

### 5. **UI/UX改善**
- [ ] リアルタイムWebSocket通信
- [ ] ドラッグ&ドロップでのファイル追加
- [ ] 詳細な統計情報表示
- [ ] ダウンロード速度グラフ
- [ ] ファイルプレビュー機能
- [ ] 多言語対応の強化

### 6. **高度な機能**
- [ ] RSS自動ダウンロード
- [ ] スケジューリング機能
- [ ] 帯域幅制限の詳細設定
- [ ] トレント作成機能
- [ ] DHT実装
- [ ] マグネットリンクからのメタデータ取得

## 📋 技術的改善項目

### コード品質
- [ ] エラーハンドリングの改善
- [ ] ログシステムの実装（構造化ログ）
- [ ] メトリクス/モニタリング
- [ ] E2Eテストの追加
- [ ] ベンチマークテスト

### デプロイメント
- [ ] Dockerイメージの作成
- [ ] 自動リリースパイプライン
- [ ] インストーラーの作成（Windows/macOS）
- [ ] systemdサービスファイル（Linux）
- [ ] 自動更新機能

### ドキュメント
- [ ] APIドキュメント（OpenAPI/Swagger）
- [ ] ユーザーマニュアル
- [ ] 開発者向けドキュメント
- [ ] コントリビューションガイド

## 🎯 次のステップ（推奨順序）

### Phase 1: コア機能の実装（2-3週間）
1. anacrolix/torrentライブラリの統合
2. 基本的なダウンロード機能
3. 進捗更新の実装
4. エラーハンドリングの強化

### Phase 2: 安定性向上（1-2週間）
1. 永続化の実装
2. セッション管理
3. クラッシュリカバリー
4. 包括的なテスト追加

### Phase 3: セキュリティ強化（1週間）
1. VPNバインディング
2. 基本的なIPフィルタリング
3. セキュリティ監査

### Phase 4: UX改善（1-2週間）
1. WebSocket実装
2. UI/UXの洗練
3. パフォーマンス最適化

## 🐛 既知の問題

1. **テンプレートパス問題**
   - 現在、静的ファイルのパスがハードコードされている
   - 実行ファイルからの相対パスに修正が必要

2. **メモリリーク可能性**
   - 長時間実行時のメモリ使用量監視が必要
   - ゴルーチンリークの確認

3. **エラーリカバリー**
   - パニック時の適切なリカバリー機構が不足
   - グレースフルシャットダウンの改善

## 💡 アーキテクチャ改善案

1. **イベント駆動アーキテクチャ**
   - トレントイベント（開始、完了、エラー等）のパブサブシステム
   - プラグインシステムの基盤

2. **モジュール化**
   - コア機能とUIの完全分離
   - gRPCによるマイクロサービス化の検討

3. **拡張性**
   - プラグインAPI
   - カスタムストレージバックエンド
   - カスタムトラッカープロトコル

## 📊 メトリクス目標

- ダウンロード速度: ネットワーク帯域の90%以上
- メモリ使用量: 100トレントで500MB以下
- 起動時間: 1秒以内
- CPU使用率: アイドル時1%以下

## 🤝 コントリビューション歓迎エリア

- UI/UXデザインの改善
- 多言語翻訳
- プラットフォーム固有の最適化
- ドキュメント作成
- バグ修正とテスト追加

---

最終更新: 2025-01-31